[project]
name = "clarity4-stack-test"
description = "Reproduction of MaxStackDepth issue in Clarity 4 with real mainnet contracts"
authors = []
telemetry = true
cache_dir = "./.cache"

################################
##### Mainnet Requirements #####
################################

##### sBTC mainnet #####
[[project.requirements]]
contract_id = 'SM3VDXK3WZZSA84XXFKAFAF15NNZX32CTSG82JFQ4.sbtc-token'

[[project.requirements]]
contract_id = 'SM3VDXK3WZZSA84XXFKAFAF15NNZX32CTSG82JFQ4.sbtc-deposit'

##### Zest mainnet #####

# Trait definitions
[[project.requirements]]
contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.ft-trait'

[[project.requirements]]
contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.ft-mint-trait'

[[project.requirements]]
contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.oracle-trait'

[[project.requirements]]
contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.incentives-v2-2' # incentives <trait>

# borrow-helper is called at runtime from mainnet, no need to pre-fetch
# [[project.requirements]]
# contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.borrow-helper-v2-1-7'

[[project.requirements]]
contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.pool-0-reserve-v2-0' # pool reserve (principal)

[[project.requirements]]
contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.zsbtc-v2-0' # lp <reedemable-token>

[[project.requirements]]
contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.redeemeable-trait-v1-2' # redeemable <trait>

[[project.requirements]]
contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.stx-btc-oracle-v1-2' # oracle sbtc <trait>

[[project.requirements]]
contract_id = 'SPN5AKG35QZSK2M8GAMR4AFX45659RJHDW353HSG.usdh-token-v1' # usdh mainnet token

[[project.requirements]]
contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.pool-read-supply-v2-1-3' # pool read supply

[[project.requirements]]
contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.pool-read-v2-1-4' # pool read

# [[project.requirements]]
# contract_id = 'SPN5AKG35QZSK2M8GAMR4AFX45659RJHDW353HSG.fees-calculator' # fee calculator

[[project.requirements]]
contract_id = 'SP2VCQJGH7PHP2DJK7Z0V48AGBHQAW3R3ZW1QF4N.usdh-oracle-v1-0' # Zest usdh oracle

##### USDh mainnet #####
[[project.requirements]]
contract_id = 'SPN5AKG35QZSK2M8GAMR4AFX45659RJHDW353HSG.usdh-token-v1'

##### Pyth v4 mainnet #####
[[project.requirements]]
contract_id = 'SP1CGXWEAMG6P6FT04W66NVGJ7PQWMDAC19R7PJ0Y.pyth-oracle-v4'

[[project.requirements]]
contract_id = 'SP1CGXWEAMG6P6FT04W66NVGJ7PQWMDAC19R7PJ0Y.pyth-storage-v4'

[[project.requirements]]
contract_id = 'SP1CGXWEAMG6P6FT04W66NVGJ7PQWMDAC19R7PJ0Y.pyth-pnau-decoder-v3'

################################
#####  Test Contracts      #####
################################

[contracts.vault-trait-v3]
path = "contracts/clarity3/traits/vault-trait.clar"
clarity_version = 3
epoch = 3.0

[contracts.zest-borrow-helper-trait-v1-v3]
path = "contracts/clarity3/traits/zest-borrow-helper-trait-v1.clar"
clarity_version = 3
epoch = 3.0

# Clarity 3 versions (OLD syntax - as-contract without explicit allowances)
[contracts.reserve-v3]
path = "contracts/clarity3/reserve-v3.clar"
clarity_version = 3
epoch = 3.0

[contracts.zest-interface-v3]
path = "contracts/clarity3/zest-interface-v3.clar"
clarity_version = 3
epoch = 3.0

[contracts.trading-v3]
path = "contracts/clarity3/trading-v3.clar"
clarity_version = 3
epoch = 3.0

# Clarity 4 versions (NEW syntax - as-contract? with explicit allowances)
[contracts.vault-trait-v4]
path = "contracts/clarity4/traits/vault-trait.clar"
clarity_version = 4
epoch = 3.3

[contracts.zest-borrow-helper-trait-v1-v4]
path = "contracts/clarity4/traits/zest-borrow-helper-trait-v1.clar"
clarity_version = 4
epoch = 3.3

[contracts.reserve-v4]
path = "contracts/clarity4/reserve-v4.clar"
clarity_version = 4
epoch = 3.3

[contracts.zest-interface-v4]
path = "contracts/clarity4/zest-interface-v4.clar"
clarity_version = 4
epoch = 3.3

[contracts.trading-v4]
path = "contracts/clarity4/trading-v4.clar"
clarity_version = 4
epoch = 3.3

# Pyth Oracle / Wormhole contracts
[contracts.wormhole-traits-v2]
path = 'contracts/oracle/wormhole/wormhole-traits-v2.clar'
clarity_version = 3
epoch = 3.1

[contracts.wormhole-core-v4]
path = 'contracts/oracle/wormhole/wormhole-core-v4.clar'
clarity_version = 3
epoch = 3.1

[repl.analysis]
passes = ["check_checker"]
check_checker = { trusted_sender = false, trusted_caller = false, callee_filter = false }

[repl.remote_data]
enabled = true
use_mainnet_wallets = true
api_url = 'https://api.hiro.so'
initial_height = 3200000
